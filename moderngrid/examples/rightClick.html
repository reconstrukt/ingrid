<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	    <script type="text/javascript" src="jQuery/jquery-3.0.0.js"></script>
	    <script type="text/javascript" src="js/modernGrid.js"></script>
	   	<script type="text/javascript" src="js/jquery.jeditable.js"></script>
	   	<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
	   	<script type="text/javascript" src="bootstrap/js/bootbox.min.js"></script>
		<link rel="stylesheet" type="text/css" href="css/modernGrid.css" />
		<link rel="stylesheet" type="text/css" href="css/icons.css" />
		<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
		<style type="text/css">
			#main {
				width: 1000px;
				margin-left: 50px;
				margin-top: 80px;
			}
			pre{

				border: solid 1px blue;
				font-size: 0.9em; 
			 	color: #000; 
				margin-left: 30px; 
				padding:10px; 
				background: #eee;
				display: block;

			}
			.footer {
				text-align: center;
				border-top: 1px #000 solid;
				margin-top: 20px;
				font-size: 0.9em;
			}
			.error, .success {
				display: none;
				width: 60%;
				z-index: 10000;
				left: 100px;
				top: 10px;
				position: fixed;
			}
		</style>
	</head>

	<body>
		<nav class="navbar navbar-inverse">
	        <div class="container">
	          <div class="navbar-header">
	            <button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
	              <span class="sr-only">Toggle navigation</span>
	              <span class="icon-bar"></span>
	              <span class="icon-bar"></span>
	              <span class="icon-bar"></span>
	            </button>
	            <a href="#" class="navbar-brand">Modern Grid</a>
	          </div>
	          <div class="navbar-collapse collapse">
	            <ul class="nav navbar-nav">
	              <li><a href="index.html">Home</a></li>
	              <li><a href="basic.html">Basic Usage</a></li>
	              <li><a href="ajax.html">Ajax Source</a></li>
	              <li><a href="interactiveAjax.html">Interactive</a></li>
	              <li><a href="moreOptions.html">Options</a></li>
	              <li><a href="fullExample.html">Full Options</a></li>
	              <li class="active"><a href="rightClick.html">Custom Right Click</a></li>
	              <li><a href="optionList.html">Option List</a></li>
	            </ul>
	          </div><!--/.nav-collapse -->
	        </div>
	      </nav>
		<div class="error alert alert-danger"></div>
		<div class="success alert alert-success"></div>
		<div id="main">
			<h3>Modern Full Options</h3>
			<div>
				<p>
					Here's an example of a table with a custom right click menu.<br> View page source to see how each table is set up.
				</p>
			<div class="mainTable"></div>
		</div>
		<p>
			<a href="index.html">Home</a> <a href="basic.html">Modern Grid Basics</a> <a href="ajax.html">Modern Grid Ajax</a> <a href="interactiveAjax.html">Modern Grid Interactive</a> <a href="moreOptions.html">Modern Grid Options</a> <a href="fullExample.html">Modern Grid Full Options</a> <a href="rightClick.html">Custom Right Click Menu</a> <a href="optionList.html">Option List</a>
		</p>
		<div class="footer">
			Modern Grid - a jQuery data grid.
		</div>
		<script type="text/javascript">
				rightClickItems = ['<div class="menuSection">Current Request Actions</div>','<i class="icon-plus-squared-alt menuAction"></i> View Details', '<i class="icon-pencil menuAction"></i> Edit Item'   ];
				rightClickItemClasses = [ '', 'viewDetails', 'editItem' ];
			$(function() {

				var mainOptions = {
				      url: "ajaxExamples/sortInlineClasses.php",
				      tableType: "dynamic",
					  sorting: true,
					  sortDefaultDir: 'asc',
					  recordsPerPage: 6,
				      pageNumber: 1, 
				      infoBarBottom: true,
				      infoBarTop: true,
      				  paging: { show: true, position: "bl"}, 
      				  search: { show: true, position:"tr"},
      				  pageToolbarHeight: 35,
      				  defaultSortColClass: "id",
      				  rowCount: { show: true, position: 'br'},
      				  totalRecords: 6,
				      colClasses: ["id", "item", "description", "cost", "quantity", "inStock", "lastModified"],
				      colWidths: [142,142,142,142,142,142, 142],
				      dataType: "html",   
				      sorting: true,
				      sortDefaultDir: 'asc',
				      resizableCols: false,
				      paging: { show: true, position: "bl"},         // create a paging toolbar
				      pageNumber: 1,                                  // page number (starting, advances with each page returned)
				      infoBarBottom: true,
				      infoBarTop: true,
				      defaultSortColClass: "id",
				      editInPlace: true,
				      rowSelection: true,
				      selectStyle: "single",
				  		onRowSelect: function(tr, selected) {
				        var rowId = $(tr).attr('data-id');
				        getDetails(rowId);			
							},
				      rightClick: true,
				      rightClickItems: rightClickItems,
				      rightClickItemClasses: rightClickItemClasses,
				      updatePage: "ajaxExamples/updatePage.php",
				      bodyTableClass: 'table',      
				      error: "Unable to retrieve data.",   
				      errorClass: "alert alert-info", 
				      };

			   var mgTableMain = $.modernGrid(".mainTable", mainOptions);

			    $('.modernGrid').on('click','.viewDetails', function() {
			      var rowId = $(this).attr('data-id'); 
			      mgTableMain.closeRightClickMenu();    
			      getDetails(rowId); 
			    });
			    $('.modernGrid').on('click','.editItem', function() {
			      var rowId = $(this).attr('data-id'); 
			      mgTableMain.closeRightClickMenu();    
			      editItem(rowId); 
			    });


			});

			function getDetails(id) {
		        $.ajax({
		          url: "ajaxExamples/getItemDetails.php",
		          dataType: "html",
		          data: {
		            id: id
		          },
		          success: function(msg) {
		            bootbox.dialog({
					  message: msg,
					  title: "Item Details",
					  buttons: {
					    cancel: {
					      label: "Close",
					      className: "btn-primary"
					    }
					  }
					});
		          },
		          error: function(jqXHR, textStatus, errorThrown) {
		          $('.error').html('There was an error displaying your data - please try again.'+errorThrown);
		          $('.error').show().fadeOut(7500);
		          return true;
		        }
		        }); 
			}
			function editItem(id) {
		        $.ajax({
		          url: "ajaxExamples/editItem.php",
		          dataType: "html",
		          data: {
		            id: id
		          },
		          success: function(msg) {
		            bootbox.dialog({
					  message: msg,
					  title: "Edit Item",
					  buttons: {
					    cancel: {
					      label: "Cancel",
					      className: "btn-primary"
					    },
					    save: {
					      label: "Save",
					      className: "btn-success",
						  callback: function() {
						  	updateItem(id);
					      }
					    }
					  }
					});
		          },
		          error: function(jqXHR, textStatus, errorThrown) {
		          $('.error').html('There was an error displaying your data - please try again.'+errorThrown);
		          $('.error').show().fadeOut(7500);
		          return true;
		        }
		        });
			}

			function updateItem(id) {
				$('.success').html("Item has been saved! This function would have code to grab all fields from modal, and then save data using ajax, with an appropriate message box.");
				$('.success').show().fadeOut(7500);
			}

		</script>

	</body>
</html>